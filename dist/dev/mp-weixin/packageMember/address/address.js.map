{"version":3,"file":"address.js","sources":["../../../../../src/packageMember/address/address.vue","../../../../../uniPage:/cGFja2FnZU1lbWJlclxhZGRyZXNzXGFkZHJlc3MudnVl"],"sourcesContent":["<script setup lang=\"ts\">\nimport { ref } from 'vue'\nimport { onShow } from '@dcloudio/uni-app'\nimport { getMemberAddressApi, deleteMemberAddressByIdApi } from '@/services/address'\nimport type { AddressItem } from '@/types/address'\nimport { useAddressStore } from '@/stores/modules/address'\n\nconst props = defineProps<{\n  from?: string\n}>()\n\nconst addressList = ref<AddressItem[]>([])\nconst getMemberAddressData = async () => {\n  const { result } = await getMemberAddressApi<AddressItem[]>()\n  addressList.value = result\n}\n\nconst onDeleteAddress = (id: string) => {\n  uni.showModal({\n    title: '确定删除吗？',\n    success: async (success) => {\n      if (success.confirm) {\n        await deleteMemberAddressByIdApi(id)\n        const index = addressList.value?.findIndex((item) => item.id === id)\n        if (index) {\n          addressList.value?.splice(index, 1)\n          uni.showToast({ icon: 'success', title: '删除成功' })\n        }\n      }\n    },\n  })\n}\n\nconst { changeAddress } = useAddressStore()\nconst onChangeSelectedAddress = (item: AddressItem) => {\n  if (props.from === 'order') {\n    changeAddress(item)\n    uni.navigateBack()\n  }\n}\n\nonShow(() => {\n  getMemberAddressData()\n})\n</script>\n\n<template>\n  <view class=\"viewport\">\n    <!-- 地址列表 -->\n    <scroll-view class=\"scroll-view\" scroll-y>\n      <view v-if=\"addressList.length\" class=\"address\">\n        <uni-swipe-action class=\"address-list\">\n          <!-- 基础用法 -->\n          <uni-swipe-action-item v-for=\"item of addressList\" :key=\"item.id\">\n            <view class=\"item\" @tap=\"onChangeSelectedAddress(item)\">\n              <view class=\"item-content\">\n                <view class=\"user\">\n                  {{ item.receiver }}\n                  <text class=\"contact\">{{ item.contact }}</text>\n                  <text v-if=\"item.isDefault\" class=\"badge\">默认</text>\n                </view>\n                <view class=\"locate\">{{ item.fullLocation + ' ' + item.address }}</view>\n                <navigator\n                  class=\"edit\"\n                  hover-class=\"none\"\n                  :url=\"`/packageMember/address-form/address-form?id=${item.id}`\"\n                  @tap.stop=\"() => {}\"\n                >\n                  修改\n                </navigator>\n              </view>\n            </view>\n            <template v-slot:right>\n              <button @tap=\"onDeleteAddress(item.id)\" class=\"delete-button\">删除</button>\n            </template>\n          </uni-swipe-action-item>\n        </uni-swipe-action>\n      </view>\n      <view v-else class=\"blank\">暂无收货地址</view>\n    </scroll-view>\n    <!-- 添加按钮 -->\n    <view class=\"add-btn\">\n      <navigator hover-class=\"none\" url=\"/packageMember/address-form/address-form\">\n        新建地址\n      </navigator>\n    </view>\n  </view>\n</template>\n\n<style lang=\"scss\">\npage {\n  height: 100%;\n  overflow: hidden;\n}\n\n/* 删除按钮 */\n.delete-button {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 50px;\n  height: 100%;\n  font-size: 28rpx;\n  color: #fff;\n  border-radius: 0;\n  padding: 0;\n  background-color: #cf4444;\n}\n\n.viewport {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  background-color: #f4f4f4;\n\n  .scroll-view {\n    padding-top: 20rpx;\n  }\n}\n\n.address {\n  padding: 0 20rpx;\n  margin: 0 20rpx;\n  border-radius: 10rpx;\n  background-color: #fff;\n\n  .item-content {\n    line-height: 1;\n    padding: 40rpx 10rpx 38rpx;\n    border-bottom: 1rpx solid #ddd;\n    position: relative;\n\n    .edit {\n      position: absolute;\n      top: 36rpx;\n      right: 30rpx;\n      padding: 2rpx 0 2rpx 20rpx;\n      border-left: 1rpx solid #666;\n      font-size: 26rpx;\n      color: #666;\n      line-height: 1;\n    }\n  }\n\n  .item:last-child .item-content {\n    border: none;\n  }\n\n  .user {\n    font-size: 28rpx;\n    margin-bottom: 20rpx;\n    color: #333;\n\n    .contact {\n      color: #666;\n    }\n\n    .badge {\n      display: inline-block;\n      padding: 4rpx 10rpx 2rpx 14rpx;\n      margin: 2rpx 0 0 10rpx;\n      font-size: 26rpx;\n      color: #27ba9b;\n      border-radius: 6rpx;\n      border: 1rpx solid #27ba9b;\n    }\n  }\n\n  .locate {\n    line-height: 1.6;\n    font-size: 26rpx;\n    color: #333;\n  }\n}\n\n.blank {\n  margin-top: 300rpx;\n  text-align: center;\n  font-size: 32rpx;\n  color: #888;\n}\n\n.add-btn {\n  height: 80rpx;\n  text-align: center;\n  line-height: 80rpx;\n  margin: 30rpx 20rpx;\n  color: #fff;\n  border-radius: 80rpx;\n  font-size: 30rpx;\n  background-color: #27ba9b;\n}\n</style>\n","import MiniProgramPage from 'D:/Arjence/学习/uniapp/heima-shop/src/packageMember/address/address.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getMemberAddressApi","uni","deleteMemberAddressByIdApi","useAddressStore","onShow"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAWM,UAAA,cAAcA,kBAAmB,CAAA,CAAE;AACzC,UAAM,uBAAuB,YAAY;AACvC,YAAM,EAAE,OAAA,IAAW,MAAMC,iBAAAA;AACzB,kBAAY,QAAQ;AAAA,IAAA;AAGhB,UAAA,kBAAkB,CAAC,OAAe;AACtCC,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,SAAS,OAAO,YAAY;;AAC1B,cAAI,QAAQ,SAAS;AACnB,kBAAMC,iBAAAA,2BAA2B,EAAE;AAC7B,kBAAA,SAAQ,iBAAY,UAAZ,mBAAmB,UAAU,CAAC,SAAS,KAAK,OAAO;AACjE,gBAAI,OAAO;AACG,gCAAA,UAAA,mBAAO,OAAO,OAAO;AACjCD,4BAAA,MAAI,UAAU,EAAE,MAAM,WAAW,OAAO,QAAQ;AAAA,YAClD;AAAA,UACF;AAAA,QACF;AAAA,MAAA,CACD;AAAA,IAAA;AAGG,UAAA,EAAE,kBAAkBE,uBAAAA;AACpB,UAAA,0BAA0B,CAAC,SAAsB;AACjD,UAAA,MAAM,SAAS,SAAS;AAC1B,sBAAc,IAAI;AAClBF,sBAAA,MAAI,aAAa;AAAA,MACnB;AAAA,IAAA;AAGFG,kBAAAA,OAAO,MAAM;AACU;IAAA,CACtB;;;;;;;;;;;;;;;;;;;;;;;;;;AC1CD,GAAG,WAAW,eAAe;"}
{"version":3,"file":"index.js","sources":["../../../../../src/pages/index/index.vue","../../../../../uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<script setup lang=\"ts\">\nimport { ref } from 'vue'\nimport { onLoad } from '@dcloudio/uni-app'\n\nimport type { BannerItem, CategoryItem, HotRecommendItem } from '@/types/home'\nimport { getHomeBannerApi, getHomeCategoryMutliApi, getHomeHotMutliApi } from '@/services/home'\n\nimport CustomNavBar from './cpns/CustomNavBar.vue'\nimport CategoryPanel from './cpns/CategoryPanel.vue'\nimport HotPanel from './cpns/HotPanel.vue'\nimport type XtxGuess from '@/components/XtxGuess.vue'\nimport PageSkeleton from './cpns/PageSkeleton.vue'\n\nconst bannerList = ref<BannerItem[]>([])\nconst getBannerList = async () => {\n  const { result } = await getHomeBannerApi<BannerItem[]>()\n  bannerList.value = result\n}\n\nconst categoryList = ref<CategoryItem[]>([])\nconst getCategoryList = async () => {\n  const { result } = await getHomeCategoryMutliApi<CategoryItem[]>()\n  categoryList.value = result\n}\n\nconst hotRecommendList = ref<HotRecommendItem[]>([])\nconst getHotRecommend = async () => {\n  const { result } = await getHomeHotMutliApi<HotRecommendItem[]>()\n  hotRecommendList.value = result\n}\n\nconst guessLikeRef = ref<InstanceType<typeof XtxGuess>>()\nconst onScrollToLower = () => {\n  guessLikeRef.value?.getGuessLikeList()\n}\n\n//下拉刷新\nconst refresh = ref(false)\nconst onRefresherRefresh = async () => {\n  refresh.value = true\n  //清空猜你喜欢组件数据\n  guessLikeRef.value?.resetData()\n  await Promise.all([\n    getBannerList(),\n    getCategoryList(),\n    getHotRecommend(),\n    guessLikeRef.value?.getGuessLikeList(),\n  ])\n  refresh.value = false\n}\n\nconst onLoading = ref(false)\nonLoad(() => {\n  //加载骨架屏\n  onLoading.value = true\n  Promise.all([getBannerList(), getCategoryList(), getHotRecommend()])\n  onLoading.value = false\n})\n</script>\n\n<template>\n  <CustomNavBar />\n  <PageSkeleton v-if=\"onLoading\" />\n  <template v-else>\n    <scroll-view\n      refresher-enabled\n      @refresherrefresh=\"onRefresherRefresh\"\n      :refresher-triggered=\"refresh\"\n      @scrolltolower=\"onScrollToLower\"\n      class=\"swiper-view\"\n      scroll-y\n    >\n      <XtxSwiper :list=\"bannerList\" />\n      <CategoryPanel :list=\"categoryList\" />\n      <HotPanel :list=\"hotRecommendList\" />\n      <XtxGuess ref=\"guessLikeRef\" />\n    </scroll-view>\n  </template>\n</template>\n\n<style lang=\"scss\">\npage {\n  background-color: #f7f7f7;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.swiper-view {\n  flex: 1;\n}\n</style>\n","import MiniProgramPage from 'D:/Arjence/学习/uniapp/heima-shop/src/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getHomeBannerApi","getHomeCategoryMutliApi","getHomeHotMutliApi","onLoad"],"mappings":";;;;;;;;;;;;;;;;AAOA,MAAA,eAAyB,MAAA;AACzB,MAAA,gBAA0B,MAAA;AAC1B,MAAA,WAAqB,MAAA;AAErB,MAAA,eAAyB,MAAA;;;;AAEnB,UAAA,aAAaA,kBAAkB,CAAA,CAAE;AACvC,UAAM,gBAAgB,YAAY;AAChC,YAAM,EAAE,OAAA,IAAW,MAAMC,cAAAA;AACzB,iBAAW,QAAQ;AAAA,IAAA;AAGf,UAAA,eAAeD,kBAAoB,CAAA,CAAE;AAC3C,UAAM,kBAAkB,YAAY;AAClC,YAAM,EAAE,OAAA,IAAW,MAAME,cAAAA;AACzB,mBAAa,QAAQ;AAAA,IAAA;AAGjB,UAAA,mBAAmBF,kBAAwB,CAAA,CAAE;AACnD,UAAM,kBAAkB,YAAY;AAClC,YAAM,EAAE,OAAA,IAAW,MAAMG,cAAAA;AACzB,uBAAiB,QAAQ;AAAA,IAAA;AAG3B,UAAM,eAAeH,cAAAA;AACrB,UAAM,kBAAkB,MAAM;;AAC5B,yBAAa,UAAb,mBAAoB;AAAA,IAAiB;AAIjC,UAAA,UAAUA,kBAAI,KAAK;AACzB,UAAM,qBAAqB,YAAY;;AACrC,cAAQ,QAAQ;AAEhB,yBAAa,UAAb,mBAAoB;AACpB,YAAM,QAAQ,IAAI;AAAA,QAChB,cAAc;AAAA,QACd,gBAAgB;AAAA,QAChB,gBAAgB;AAAA,SAChB,kBAAa,UAAb,mBAAoB;AAAA,MAAiB,CACtC;AACD,cAAQ,QAAQ;AAAA,IAAA;AAGZ,UAAA,YAAYA,kBAAI,KAAK;AAC3BI,kBAAAA,OAAO,MAAM;AAEX,gBAAU,QAAQ;AACV,cAAA,IAAI,CAAC,cAAc,GAAG,mBAAmB,gBAAiB,CAAA,CAAC;AACnE,gBAAU,QAAQ;AAAA,IAAA,CACnB;;;;;;;;;;;;;;;;;;;;;;;;;ACxDD,GAAG,WAAW,eAAe;"}